#  Gesti贸n de Avatares
Para gestionar avatares en una aplicaci贸n Django, seguiremos los siguientes pasos: creaci贸n del modelo Avatar, configuraci贸n de almacenamiento de im谩genes, ajustes en `settings.py` y `urls.py`, y la implementaci贸n de vistas y templates para el manejo de avatares.

1. **Creaci贸n del Modelo Avatar**
- Primero, creamos un modelo llamado Avatar que estar谩 vinculado al modelo User de Django. Este modelo tendr谩 un campo para almacenar la imagen del avatar.

```python
from django.db import models
from django.contrib.auth.models import User

class Avatar(models.Model):
    user = models.OneToOneField(User, on_delete=models.CASCADE)
    imagen = models.ImageField(upload_to='avatares', null=True, blank=True)

    def __str__(self):
        return f"{self.user.username} - {self.imagen}"
```

2. **Configuraci贸n de Almacenamiento de Im谩genes**
- Necesitamos configurar Django para que pueda manejar la carga y el almacenamiento de im谩genes. Para ello, ajustamos la configuraci贸n en `settings.py`.

```python 
import os

MEDIA_URL = '/media/'
MEDIA_ROOT = os.path.join(BASE_DIR, 'media')
```

- Tambi茅n debemos asegurarnos de que tenemos la librer铆a Pillow instalada, ya que es necesaria para manejar las im谩genes en Django. Podemos instalarla usando: `pip install Pillow`

3. **Ajustes en urls.py**
- Debemos a帽adir las rutas necesarias en `urls.py` para servir los archivos de medios durante el desarrollo.
```python 
from django.conf import settings
from django.conf.urls.static import static

urlpatterns = [
    # otras rutas
]

if settings.DEBUG: # hacemos esta validaci贸n para que servir los estaticos desde django solo en desarrollo
    urlpatterns += static(settings.MEDIA_URL, document_root=settings.MEDIA_ROOT)
```

4. **Creaci贸n de la Vista para Gestionar Avatares**
- Creamos una vista que permita a los usuarios cargar y actualizar sus avatares. Esta vista utilizar谩 un formulario que incluye el campo de imagen.
```python 
from django.shortcuts import render, redirect
from django.contrib.auth.decorators import login_required
from .forms import AvatarForm

@login_required
def upload_avatar(request):
    if request.method == 'POST':
        form = AvatarForm(request.POST, request.FILES, instance=request.user.avatar)
        if form.is_valid():
            form.save()
            return redirect('profile')
    else:
        form = AvatarForm(instance=request.user.avatar)
    return render(request, 'upload_avatar.html', {'form': form})
```

5. **Creaci贸n del Formulario para el Avatar**
- Definimos un formulario en `forms.py` que maneje la carga de la imagen del avatar.
```python 
from django import forms
from .models import Avatar

class AvatarForm(forms.ModelForm):
    class Meta:
        model = Avatar
        fields = ['imagen']
```

6. **Creaci贸n del Template**
- Creamos un template llamado `upload_avatar.html` para permitir a los usuarios cargar su avatar.
```html
{% extends "base_generic.html" %}

{% block content %}
  <h2>Subir Avatar</h2>
  <form method="post" enctype="multipart/form-data">
    {% csrf_token %}
    {{ form.as_p }}
    <button type="submit">Subir</button>
  </form>
{% endblock %}
```

##  Conclusi贸n
Con estos pasos, hemos implementado la gesti贸n de avatares en una aplicaci贸n Django. Hemos cubierto la creaci贸n del modelo Avatar, la configuraci贸n del almacenamiento de im谩genes, los ajustes necesarios en `settings.py` y `urls.py`, y la implementaci贸n de una vista y un template para permitir a los usuarios cargar y actualizar sus avatares. Este sistema permite una gesti贸n eficiente de avatares en una aplicaci贸n Django.